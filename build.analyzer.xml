<project name="php" default="analyzer:run">
    <property name="dir.build" value="${project.basedir}/build"/>
    <property name="dir.reports" value="${dir.build}/logs"/>
    <property name="dir.reports.pdepend" value="${dir.build}/pdepend"/>
    <property name="dir.reports.coverage" value="${dir.reports}/coverage"/>
    <property name="dir.reports.clover" value="${dir.reports}"/>

    <target name="analyzer:run"
            depends="analyzer:clean, analyzer:prepare, analyzer:client-jshint, analyzer:client-plato"
            description="Run all test and build everything"/>

    <!--  Cleanup before build  -->
    <target name="analyzer:clean" description="Clean up build directories.">
        <echo msg="Cleaning build directories ..."/>
        <delete dir="${dir.build}" verbose="true"/>
    </target>

    <!--  Prepare for build  -->
    <target name="analyzer:prepare" description="Create build directories.">
        <echo msg="Creating build directories ..."/>
        <echo msg="Creating build directories ..."/>
        <mkdir dir="${dir.build}"/>
        <mkdir dir="${dir.reports}"/>
        <mkdir dir="${dir.reports.coverage}"/>
        <mkdir dir="${dir.reports.clover}"/>
        <mkdir dir="${dir.reports.pdepend}"/>
    </target>

    <!-- Javascript jshint -->
    <target name="analyzer:client-jshint" description="Checks javascript coding standard.">
        <echo msg="Checking javascript coding standard ..."/>
        <exec passthru="true" command="jshint ${dir.clientsrc} --jslint-reporter &gt; ${dir.reports}/jshint.xml"/>
    </target>

    <!-- Javascript Plato analyzer -->
    <target name="analyzer:client-plato" description="Plato metrics tool.">
        <echo msg="Producing plato reports ..."/>
        <exec passthru="true" command="plato -r -d ${dir.dir.clientreports} ${dir.clientsrc}"/>
    </target>

</project>